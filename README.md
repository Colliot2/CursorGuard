# Cursor å¼ºåˆ¶æœ€ä½³å®è·µåŒ…è£…å™¨ - Rust äºŒè¿›åˆ¶ç‰ˆ

## ğŸ¯ ç›®æ ‡

å¼ºåˆ¶ Cursor AI åœ¨ä½¿ç”¨ `grep`ã€`tail`ã€`head` å‘½ä»¤æ—¶è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé¿å…åå¤é‡è·‘å‘½ä»¤ã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **äºŒè¿›åˆ¶æ›¿æ¢**ï¼šç›´æ¥æ›¿æ¢ç³»ç»Ÿå‘½ä»¤ï¼ˆæ”¾åœ¨ PATH ä¼˜å…ˆè·¯å¾„ä¸­ï¼‰
- âœ… **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦åœ¨ Cursor ç¯å¢ƒä¸­
- âœ… **é›¶å½±å“**ï¼šæ™®é€šç»ˆç«¯ä¸å—ä»»ä½•å½±å“ï¼Œæ­£å¸¸ä½¿ç”¨
- âœ… **å¼ºåˆ¶è§„åˆ™**ï¼š
  - `grep`: è‡ªåŠ¨æ·»åŠ  `-C 20`ï¼ˆå‰åå„ 20 è¡Œä¸Šä¸‹æ–‡ï¼‰
  - `tail`: æœ€å°‘ 100 è¡Œï¼ˆ-n 100ï¼‰
  - `head`: æœ€å°‘ 100 è¡Œï¼ˆ-n 100ï¼‰
  - ç®¡é“è¾“å…¥è‡ªåŠ¨ä¿å­˜åˆ° `/tmp/cursor_outputs/`

### æ£€æµ‹æœºåˆ¶
1. **ç¯å¢ƒå˜é‡æ£€æµ‹**
   - `TERM_PROGRAM=vscode`
   - `VSCODE_GIT_ASKPASS_MAIN` åŒ…å« "Cursor"
   - `VSCODE_IPC_HOOK_CLI` åŒ…å« "Cursor"

2. **è¿›ç¨‹æ ‘æ£€æµ‹**
   - æ£€æŸ¥çˆ¶è¿›ç¨‹é“¾ï¼ˆæœ€å¤š 10 å±‚ï¼‰
   - æŸ¥æ‰¾æ˜¯å¦åŒ…å« "Cursor" æˆ– "vscode" è¿›ç¨‹

## ğŸ“¦ å®‰è£…

### 1. ç¼–è¯‘ï¼ˆå¦‚æœè¿˜æ²¡ç¼–è¯‘ï¼‰
```bash
cd /Users/zhenghu/tools/cursor_grep_wrapper
source "$HOME/.cargo/env"
cargo build --release
```

### 2. å®‰è£…åˆ°ç³»ç»Ÿï¼ˆéœ€è¦ sudoï¼‰
```bash
./install.sh
# æˆ–æ‰‹åŠ¨å®‰è£…ï¼š
sudo cp target/release/{grep,tail,head} /usr/local/bin/
```

### 3. å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆæ— éœ€ sudoï¼‰
```bash
mkdir -p ~/bin
cp target/release/{grep,tail,head} ~/bin/
# ç¡®ä¿ ~/bin åœ¨ PATH ä¸­ä¸”ä¼˜å…ˆçº§é«˜
export PATH="$HOME/bin:$PATH"
# æ·»åŠ åˆ° ~/.zshrc æˆ– ~/.bashrc
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.zshrc
```

## ğŸ§ª æµ‹è¯•

### åœ¨ Cursor ç»ˆç«¯ä¸­æµ‹è¯•
```bash
# æµ‹è¯• grep - åº”è¯¥çœ‹åˆ°å¼ºåˆ¶æç¤º
echo "error line 1
info line 2
error line 3" | grep "error"

# è¾“å‡ºï¼š
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ“‹ [Cursor å¼ºåˆ¶æœ€ä½³å®è·µ] ç®¡é“è¾“å…¥å·²è‡ªåŠ¨ä¿å­˜
# ğŸ“ æ–‡ä»¶ä½ç½®: /tmp/cursor_outputs/pipeline_input_...
# âš ï¸  [Cursor å¼ºåˆ¶æœ€ä½³å®è·µ] grep æœªæŒ‡å®šä¸Šä¸‹æ–‡ï¼Œå·²è‡ªåŠ¨æ·»åŠ  -C 20
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# æµ‹è¯• tail - åº”è¯¥å¼ºåˆ¶æ”¹ä¸º 100 è¡Œ
seq 1 20 | tail -5
# è¾“å‡ºå…¨éƒ¨ 20 è¡Œï¼ˆå› ä¸ºä¸è¶³ 100 è¡Œï¼‰

# æµ‹è¯• head
seq 1 20 | head -3
# è¾“å‡ºå…¨éƒ¨ 20 è¡Œ
```

### åœ¨æ™®é€šç»ˆç«¯ä¸­æµ‹è¯•
```bash
# æ‰“å¼€ç³»ç»Ÿ Terminal.app
echo "test" | grep "test"
# æ­£å¸¸è¾“å‡ºï¼Œæ— ä»»ä½•æç¤º

seq 1 10 | tail -3
# æ­£å¸¸è¾“å‡ºæœ€å 3 è¡Œï¼š
# 8
# 9
# 10
```

## ğŸ—‘ï¸  å¸è½½

```bash
./uninstall.sh
# æˆ–æ‰‹åŠ¨å¸è½½ï¼š
sudo rm /usr/local/bin/{grep,tail,head}
# æˆ–ï¼š
rm ~/bin/{grep,tail,head}
```

## ğŸ“Š å·¥ä½œåŸç†

```
å‘½ä»¤è°ƒç”¨æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cursor AI   â”‚
â”‚ æ‰§è¡Œå‘½ä»¤    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ~/bin/grep          â”‚  â† æˆ‘ä»¬çš„åŒ…è£…å™¨ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰
â”‚ /usr/local/bin/grep â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ æ£€æµ‹æ˜¯å¦åœ¨ Cursor ç¯å¢ƒï¼Ÿ
       â”‚   â””â”€â†’ æ˜¯ï¼šåº”ç”¨å¼ºåˆ¶è§„åˆ™
       â”‚   â””â”€â†’ å¦ï¼šç›´æ¥è°ƒç”¨åŸå§‹å‘½ä»¤
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /usr/bin/grep       â”‚  â† åŸå§‹ç³»ç»Ÿå‘½ä»¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ ç›®å½•ç»“æ„

```
cursor_grep_wrapper/
â”œâ”€â”€ Cargo.toml          # é¡¹ç›®é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ common.rs       # å…±äº«ä»£ç ï¼ˆCursor æ£€æµ‹é€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ grep.rs         # grep åŒ…è£…å™¨
â”‚   â”œâ”€â”€ tail.rs         # tail åŒ…è£…å™¨
â”‚   â””â”€â”€ head.rs         # head åŒ…è£…å™¨
â”œâ”€â”€ target/release/     # ç¼–è¯‘äº§ç‰©
â”‚   â”œâ”€â”€ grep            # 614KB äºŒè¿›åˆ¶
â”‚   â”œâ”€â”€ tail            # 613KB äºŒè¿›åˆ¶
â”‚   â””â”€â”€ head            # 613KB äºŒè¿›åˆ¶
â”œâ”€â”€ install.sh          # å®‰è£…è„šæœ¬
â”œâ”€â”€ uninstall.sh        # å¸è½½è„šæœ¬
â””â”€â”€ README.md           # æœ¬æ–‡æ¡£
```

## ğŸ’¡ ä¼˜åŠ¿

### vs Shell è„šæœ¬æ–¹æ¡ˆ
1. **æ€§èƒ½æ›´å¥½**ï¼šäºŒè¿›åˆ¶å¯åŠ¨æ›´å¿«ï¼Œæ— éœ€è§£é‡Šå™¨
2. **æ›´å¯é **ï¼šä¸å— shell é…ç½®å½±å“
3. **æ›´å¼ºç¡¬**ï¼šç›´æ¥äºŒè¿›åˆ¶æ›¿æ¢ï¼Œæ— æ³•ç»•è¿‡
4. **è·¨ Shell**ï¼šbashã€zshã€fish å…¨éƒ¨æ”¯æŒ

### vs Alias/Function æ–¹æ¡ˆ
1. **æ— æ³•ç»•è¿‡**ï¼šAlias å¯ä»¥ç”¨ `\grep` ç»•è¿‡ï¼ŒäºŒè¿›åˆ¶ä¸è¡Œ
2. **ä¸ä¾èµ–é…ç½®**ï¼šä¸éœ€è¦ä¿®æ”¹ `.bashrc` æˆ– `.zshrc`
3. **ç«‹å³ç”Ÿæ•ˆ**ï¼šå®‰è£…åæ‰€æœ‰æ–°ç»ˆç«¯ç«‹å³ç”Ÿæ•ˆ

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### ç¼–è¯‘é€‰é¡¹
- **Release æ¨¡å¼**ï¼š`cargo build --release` ä¼˜åŒ–æ€§èƒ½
- **é™æ€é“¾æ¥**ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— éœ€è¿è¡Œæ—¶ä¾èµ–
- **è·¨å¹³å°**ï¼šRust ä»£ç å¯è·¨ macOS/Linux

### ä¾èµ–
- `chrono`: æ—¶é—´æˆ³ç”Ÿæˆ
- `rand`: éšæœºæ–‡ä»¶å
- `atty`: æ£€æµ‹æ˜¯å¦æœ‰ç®¡é“è¾“å…¥

### äºŒè¿›åˆ¶å¤§å°
çº¦ 600KB/æ–‡ä»¶ï¼ˆå·²ä¼˜åŒ–ï¼‰ï¼Œå¯ä»¥è¿›ä¸€æ­¥ç”¨ `strip` å‡å°ï¼š
```bash
strip target/release/{grep,tail,head}
# å‡å°åˆ°çº¦ 400KB
```

## ğŸ“ è®¸å¯

MIT License

**[DONE]**



